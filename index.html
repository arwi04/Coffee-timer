<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, orientation=landscape">
  <title>CoffeeTimer PWA</title>
  <link rel="manifest" href="manifest.json">
  <!-- Google Font -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <style>
    html, body { margin: 0; padding: 0; height: 100vh; background: #f0f4f8; font-family: 'Poppins', sans-serif; color: #333; }
    header { background: #007BFF; color: #fff; padding: 0.75rem; display: flex; justify-content: space-between; align-items: center; }
    header h1 { margin: 0; font-size: 1.2rem; font-weight: 600; }
    #settingsBtn, #backHeaderBtn { background: #FF8C00; border: none; color: #fff; padding: 0.5rem 1rem; border-radius: 8px; cursor: pointer; font-weight: 600; }
    #backHeaderBtn { display: none; }
    main { flex: 1; display: flex; overflow: hidden; }
    #mainScreen, #settingsScreen { flex: 1; display: none; }
    #mainScreen.active, #settingsScreen.active { display: flex; }
    .panel { background: #E3F2FD; flex: 1; margin: 0.5rem; border-radius: 12px; display: flex; flex-direction: column; }
    .panel h2 { margin: 0; padding: 0.5rem; background: #007BFF; color: #fff; text-align: center; font-weight: 600; }
    .panel-content { flex: 1; padding: 0.5rem; overflow-y: auto; }
    .coffee-card, .maint-card { background: #FFFDE7; margin: 0.25rem 0; padding: 0.5rem; border-radius: 6px; display: flex; justify-content: space-between; align-items: center; }
    .coffee-text, .maint-text { font-size: 0.95rem; }
    .coffee-text strong, .maint-text strong { font-weight: bold; }
    .warning { color: red; font-weight: bold; }
    .settings-column { flex: 1; display: flex; flex-direction: column; margin: 0.5rem; background: #FFF3E0; border-radius: 12px; }
    .settings-column h2 { margin: 0; padding: 0.5rem; background: #007BFF; color: #fff; text-align: center; font-weight: 600; }
    .settings-list { flex: 1; padding: 0.5rem; overflow-y: auto; }
    .setting-card { background: #FFE0B2; padding: 0.5rem; margin: 0.25rem 0; border-radius: 8px; display: flex; align-items: center; }
    .setting-card input[type="checkbox"] { margin-right: 0.5rem; }
    /* Wartung Einstellungen: Name breiter, Tage schmal */
    #maintenanceSettingsList .setting-card input[type="text"] { width: 8rem; padding: 0.4rem; border-radius: 6px; border: 1px solid #ccc; }
    #maintenanceSettingsList .setting-card input[type="number"] { width: 3rem; padding: 0.4rem; border-radius: 6px; border: 1px solid #ccc; }
    #maintenanceSettingsList .setting-card select { width: 3rem; padding: 0.4rem; border-radius: 6px; border: 1px solid #ccc; }
  </style>
</head>
<body>
  <header>
    <h1>CoffeeTimer</h1>
    <button id="backHeaderBtn">Zur√ºck</button>
    <button id="settingsBtn">Einstellungen</button>
  </header>
  <main>
    <div id="mainScreen" class="active">
      <div class="panel">
        <h2>Kaffeesorten</h2>
        <div class="panel-content" id="selectedCoffees"></div>
      </div>
      <div class="panel">
        <h2>Wartungen</h2>
        <div class="panel-content" id="maintList"></div>
      </div>
    </div>
    <div id="settingsScreen">
      <div class="settings-column">
        <h2>Kaffee Einstellungen</h2>
        <div class="settings-list" id="coffeeSettingsList"></div>
      </div>
      <div class="settings-column">
        <h2>Wartungs Einstellungen</h2>
        <div class="settings-list" id="maintenanceSettingsList"></div>
      </div>
    </div>
  </main>
  <script>
    const COFFEE_COUNT = 20;
    const MAINT_COUNT = 4;
    const storageKey = 'coffeeSettings';
    const defaultSettings = { coffees: Array.from({length:COFFEE_COUNT},(_,i)=>({name:`Kaffee ${i+1}`, grind:25, selected:false, key:1})), chooseLimit:4, maints:Array.from({length:MAINT_COUNT},(_,i)=>({name:`Wartung ${i+1}`, interval:30, remaining:30})), lastDate:new Date().toDateString() };
    let settings = JSON.parse(localStorage.getItem(storageKey))||defaultSettings;
    function renderMain(){ document.getElementById('mainScreen').classList.add('active'); document.getElementById('settingsScreen').classList.remove('active'); document.getElementById('settingsBtn').style.display='block'; document.getElementById('backHeaderBtn').style.display='none'; const sel=document.getElementById('selectedCoffees'); sel.innerHTML=''; settings.coffees.filter(c=>c.selected).slice(0,settings.chooseLimit).forEach(c=>{ const card=document.createElement('div'); card.className='coffee-card'; card.innerHTML=`<span class='coffee-text'><strong>${c.name}</strong>, Mahlgrad <strong>${c.grind}</strong>, Taste <strong>${c.key||1}</strong></span>`; sel.append(card); }); const ml=document.getElementById('maintList'); ml.innerHTML=''; settings.maints.forEach(m=>{ const card=document.createElement('div'); card.className='maint-card'; const txt=`<span class='maint-text'><strong>${m.name}</strong>: <strong>${m.remaining}</strong> Tage</span>`; card.innerHTML=txt+`<button onclick="{m.remaining=m.interval;localStorage.setItem('${storageKey}',JSON.stringify(settings));renderMain();}">Reset</button>`; ml.append(card); }); }
    function renderSettings(){ document.getElementById('settingsScreen').classList.add('active'); document.getElementById('mainScreen').classList.remove('active'); document.getElementById('settingsBtn').style.display='none'; document.getElementById('backHeaderBtn').style.display='block'; const cs=document.getElementById('coffeeSettingsList'); cs.innerHTML=''; settings.coffees.forEach((c,i)=>{ const card=document.createElement('div'); card.className='setting-card'; card.innerHTML=`<input type='checkbox' ${c.selected?'checked':''} onchange='settings.coffees[${i}].selected=this.checked;localStorage.setItem('${storageKey}',JSON.stringify(settings));'> <input type='text' value='${c.name}' onchange='settings.coffees[${i}].name=this.value;localStorage.setItem('${storageKey}',JSON.stringify(settings));'> <input type='number' min='10' max='40' step='1' value='${c.grind}' onchange='settings.coffees[${i}].grind=parseInt(this.value);localStorage.setItem('${storageKey}',JSON.stringify(settings));'> <select onchange='settings.coffees[${i}].key=parseInt(this.value);localStorage.setItem('${storageKey}',JSON.stringify(settings));'>${[1,2,3].map(n=>`<option value='${n}' ${c.key===n?'selected':''}>${n}</option>`).join('')}</select>`; cs.append(card); }); const ms=document.getElementById('maintenanceSettingsList'); ms.innerHTML=''; settings.maints.forEach((m,i)=>{ const card=document.createElement('div'); card.className='setting-card'; card.innerHTML=`<input type='text' value='${m.name}' onchange='settings.maints[${i}].name=this.value;localStorage.setItem('${storageKey}',JSON.stringify(settings));'> <input type='number' min='1' value='${m.interval}' onchange='settings.maints[${i}].interval=parseInt(this.value);settings.maints[${i}].remaining=settings.maints[${i}].interval;localStorage.setItem('${storageKey}',JSON.stringify(settings));'>`; ms.append(card); }); }
    document.getElementById('settingsBtn').onclick=renderSettings;
    document.getElementById('backHeaderBtn').onclick=renderMain;
    document.addEventListener('DOMContentLoaded',renderMain);
  </script>
</body>
</html>
